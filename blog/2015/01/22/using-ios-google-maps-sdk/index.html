
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Using iOS Google Maps SDK - Ian&#8217;s Tech Note</title>
  <meta name="author" content="Ian Dai">

  
  <meta name="description" content="Steps Apply Google Map Api Key
Import GoogleMaps.bundle in GoogleMaps.framework
In Other Linker Flags section, add -ObjC
In AppDelegate . #import &lt &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://iandai.github.io/blog/2015/01/22/using-ios-google-maps-sdk/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Ian's Tech Note" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Ian&#8217;s Tech Note</a></h1>
  
    <h2>Thoughts about Ruby, Rails and iOS.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="iandai.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Using iOS Google Maps SDK</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-01-22T20:10:37+09:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2015</span></span> <span class='time'>8:10 pm</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Steps</h2>

<ol>
<li>Apply Google Map Api Key</li>
<li>Import GoogleMaps.bundle in GoogleMaps.framework</li>
<li>In <code>Other Linker Flags</code> section, add <code>-ObjC</code></li>
<li><p>In <code>AppDelegate</code> .</p>

<pre><code class="`sh"> #import &lt;GoogleMaps/GoogleMaps.h&gt;
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
 {
     [GMSServices provideAPIKey:@"API_KEY"];
     return YES;
 }
</code></pre></li>
</ol>


<h2>Possible issues</h2>

<ol>
<li>In 2nd step, use GoogleMaps.bundle in GoogleMaps.framework, instead of use GoogleMaps.framework</li>
<li>In 3rd step, use <code>-ObjC</code> will have conflict with other framework such as Parse&rsquo;s framework. The solution is to add following:
 <code>sh
 -force_load $(PROJECT_DIR)/GoogleMaps.framework/GoogleMaps
</code></li>
<li><p>Delay when load maps. When user click to access maps view, app will fetch location data from server. This process takes time and map will have a moment stop at the position of starting position. This will confuse user and thought maps is not working properly.
Solution is to preload data that is near the really location, so google maps will do the animation. Since the animation will take a while, during which time, another thread will fetch the data and then show the correct location.</p>

<pre><code class="``">  - (void)viewDidLoad
  {
      [super viewDidLoad];
      CGPoint center = CGPointMake(44.209769, -69.0648919);
      GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:center.x
                                                          longitude:center.y
                                                               zoom:15.5];
      self.mapView.camera = camera;
  }
</code></pre></li>
<li><p>Use google maps in a subview.<br/>
Following Code will not work in a subview.</p>

<pre><code class="``">  #import "YourViewController.h"
  #import &lt;GoogleMaps/GoogleMaps.h&gt;

  @implementation YourViewController {
      GMSMapView *mapView_;
  }

  - (void)viewDidLoad {
      // Create a GMSCameraPosition that tells the map to display the
      // coordinate -33.86,151.20 at zoom level 6.
      GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:-33.86
                                                        longitude:151.20
                                                             zoom:6];
      mapView_ = [GMSMapView mapWithFrame:CGRectZero camera:camera];
      mapView_.myLocationEnabled = YES;
      self.view = mapView_;

      // Creates a marker in the center of the map.
      GMSMarker *marker = [[GMSMarker alloc] init];
      marker.position = CLLocationCoordinate2DMake(-33.86, 151.20);
      marker.title = @"Sydney";
      marker.snippet = @"Australia";
      marker.map = mapView_;
      }
  @end
</code></pre>

<p>Chnage the existing Xib&rsquo;s class into GSMMapView will solve the problem.</p>

<pre><code class="``">  @property (weak, nonatomic) IBOutlet GMSMapView *mapView;

  CGPoint center = CGPointMake(44.209769, -69.0648919);
  GMSCameraPosition *camera = [GMSCameraPosition cameraWithLatitude:center.x
                                                          longitude:center.y
                                                               zoom:15.5];
  self.mapView.camera = camera;

  GMSMarker *marker = [[GMSMarker alloc] init];
  marker.position = CLLocationCoordinate2DMake(-33.86, 151.20);
  marker.title = @"Sydney";
  marker.snippet = @"Australia";
  marker.icon = [UIImage imageNamed:@"map_pin_icon"];
  marker.map = self.mapView;
</code></pre></li>
</ol>


<h2>Reference</h2>

<ul>
<li><a href="http://stackoverflow.com/questions/15417811/cannot-put-a-google-maps-gmsmapview-in-a-subview-of-main-main-view">Add google maps in a subview</a></li>
<li><a href="http://dev.classmethod.jp/smartphone/iphone/ios-map-programming-series-1/">Customise GMSMarker</a></li>
<li><a href="http://stackoverflow.com/questions/16706587/can-i-link-googlemaps-sdk-for-ios-with-a-linker-flag-other-than-objc">Other Linker Flags Conflict</a></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Ian Dai</span></span>

      




<time class='entry-date' datetime='2015-01-22T20:10:37+09:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>22</span><span class='date-suffix'>nd</span>, <span class='date-year'>2015</span></span> <span class='time'>8:10 pm</span></time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://iandai.github.io/blog/2015/01/22/using-ios-google-maps-sdk/" data-via="" data-counturl="http://iandai.github.io/blog/2015/01/22/using-ios-google-maps-sdk/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/07/08/cache-expiration/" title="Previous Post: Cache Expiration">&laquo; Cache Expiration</a>
      
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/01/22/using-ios-google-maps-sdk/">Using iOS Google Maps SDK</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/08/cache-expiration/">Cache Expiration</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/01/sql-injection/">SQL Injection</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/04/08/css-notes/">CSS NOTES</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/18/port-forward-slash-tunnel/">SSH Port Forward/Tunnel</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Ian Dai -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
